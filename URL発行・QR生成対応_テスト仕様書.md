# URL発行・QR生成対応 - テスト仕様書

## 1. テスト概要

### 1.1 テスト目的
URL発行・QR生成機能の追加実装が正常に動作することを確認し、品質を保証する

### 1.2 テスト範囲
- GitHub Pages デプロイメント
- QRコード生成機能
- QRコードダウンロード機能
- 実際のURL共有機能
- 異なるデバイスでの動作確認

### 1.3 テスト環境
- **ブラウザ**: Chrome, Firefox, Safari, Edge
- **デバイス**: PC, スマートフォン, タブレット
- **OS**: Windows, macOS, iOS, Android
- **GitHub Pages**: 本番環境

## 2. GitHub Pages デプロイメントテスト

### 2.1 初回デプロイテスト

#### TC-001: リポジトリ作成・設定
- **前提条件**: GitHub アカウントが利用可能
- **手順**:
  1. 新規リポジトリを作成
  2. index.html をアップロード
  3. Pages 設定を有効化
- **期待結果**:
  - リポジトリが正常に作成される
  - Pages 設定が有効化される
  - 公開URLが生成される

#### TC-002: GitHub Actions 実行
- **前提条件**: workflows/pages.yml が設定済み
- **手順**:
  1. main ブランチに push
  2. GitHub Actions の実行を確認
- **期待結果**:
  - Actions が正常に実行される
  - エラーなくデプロイが完了する
  - Pages が更新される

### 2.2 公開URL確認テスト

#### TC-003: 公開URL アクセス
- **前提条件**: デプロイが完了済み
- **手順**:
  1. 生成された公開URLにアクセス
  2. 作成画面が表示されることを確認
- **期待結果**:
  - HTTPSでアクセス可能
  - 正常にページが表示される
  - 全ての機能が利用可能

## 3. QRコード生成機能テスト

### 3.1 QRコード表示テスト

#### TC-004: QRコード生成（正常系）
- **前提条件**: リストに1つ以上の店舗が追加済み
- **手順**:
  1. 「共有URLを生成」ボタンをクリック
  2. QRコードが生成されることを確認
- **期待結果**:
  - QRコードが正しく表示される
  - 200x200px のサイズで表示される
  - エラーメッセージが表示されない

#### TC-005: QRコード生成（エラー系）
- **前提条件**: リストが空の状態
- **手順**:
  1. 「共有URLを生成」ボタンをクリック
- **期待結果**:
  - エラーメッセージが表示される
  - QRコードが生成されない

#### TC-006: QRコード外観確認
- **前提条件**: QRコードが生成済み
- **手順**:
  1. 生成されたQRコードを確認
- **期待結果**:
  - 色が指定色（dark: #2C3E50, light: #FFFFFF）
  - 枠線が適切に表示される
  - 視認性が良好

### 3.2 QRコード読み取りテスト

#### TC-007: スマートフォンでの読み取り
- **前提条件**: QRコードが生成済み
- **手順**:
  1. スマートフォンのカメラでQRコードを読み取り
  2. 読み取ったURLにアクセス
- **期待結果**:
  - 正しいURLが読み取れる
  - 共有画面が正常に表示される
  - リストの内容が正しく表示される

#### TC-008: 異なるQRコードリーダーでの読み取り
- **前提条件**: QRコードが生成済み
- **手順**:
  1. 3つ以上の異なるQRコードリーダーアプリで読み取り
- **期待結果**:
  - 全てのアプリで正常に読み取れる
  - 同じURLが取得される

## 4. QRコードダウンロード機能テスト

### 4.1 ダウンロード機能テスト

#### TC-009: QRコードダウンロード（正常系）
- **前提条件**: QRコードが生成済み
- **手順**:
  1. 「QRコードをダウンロード」ボタンをクリック
- **期待結果**:
  - ファイルダウンロードが開始される
  - ファイル名が「wishlist-qrcode-{timestamp}.png」形式
  - 成功メッセージが表示される

#### TC-010: ダウンロードファイル確認
- **前提条件**: QRコードがダウンロード済み
- **手順**:
  1. ダウンロードしたファイルを確認
  2. 画像ビューアで開く
- **期待結果**:
  - PNG形式で保存される
  - 画像が正しく表示される
  - ファイルサイズが適切

#### TC-011: ダウンロード失敗時の処理
- **前提条件**: QRコードが生成されていない状態
- **手順**:
  1. 「QRコードをダウンロード」ボタンをクリック
- **期待結果**:
  - エラーメッセージが表示される
  - ダウンロードが実行されない

## 5. 実際のURL共有機能テスト

### 5.1 URL共有テスト

#### TC-012: URL共有（同一デバイス）
- **前提条件**: 共有URLが生成済み
- **手順**:
  1. 共有URLをコピー
  2. 新しいブラウザタブで開く
- **期待結果**:
  - 共有画面が正常に表示される
  - リストの内容が正しく表示される
  - 作成者名が正しく表示される

#### TC-013: URL共有（異なるデバイス）
- **前提条件**: 共有URLが生成済み
- **手順**:
  1. PCで共有URLを生成
  2. スマートフォンでURLにアクセス
- **期待結果**:
  - 異なるデバイスでも正常に表示される
  - レスポンシブデザインが適用される
  - 全ての店舗情報が表示される

### 5.2 長期間保存テスト

#### TC-014: URL永続性確認
- **前提条件**: 共有URLが生成済み
- **手順**:
  1. 1日後に同じURLにアクセス
  2. 1週間後に同じURLにアクセス
- **期待結果**:
  - 期間が経過しても正常にアクセス可能
  - データが保持されている
  - 表示に問題がない

## 6. ブラウザ互換性テスト

### 6.1 各ブラウザでの動作確認

#### TC-015: Chrome での動作確認
#### TC-016: Firefox での動作確認
#### TC-017: Safari での動作確認
#### TC-018: Edge での動作確認

- **手順**: 各ブラウザでTC-001〜TC-014を実施
- **期待結果**: 全ブラウザで正常に動作

### 6.2 モバイルブラウザテスト

#### TC-019: iPhone Safari での動作確認
#### TC-020: Android Chrome での動作確認

- **手順**: モバイルブラウザでの全機能テスト
- **期待結果**: モバイルでも正常に動作

## 7. パフォーマンステスト

### 7.1 QRコード生成パフォーマンス

#### TC-021: QRコード生成速度
- **前提条件**: 50店舗のリストが作成済み
- **手順**:
  1. 「共有URLを生成」ボタンをクリック
  2. QRコード生成時間を測定
- **期待結果**:
  - 3秒以内にQRコードが生成される
  - UI操作に遅延がない

#### TC-022: 大量データでのQRコード生成
- **前提条件**: 100店舗のリストが作成済み
- **手順**:
  1. 共有URLを生成
  2. QRコード生成を実行
- **期待結果**:
  - 正常にQRコードが生成される
  - メモリ使用量が過度に増加しない

## 8. セキュリティテスト

### 8.1 HTTPS通信確認

#### TC-023: HTTPS強制確認
- **前提条件**: GitHub Pages が有効化済み
- **手順**:
  1. HTTPでアクセスを試行
  2. HTTPSにリダイレクトされることを確認
- **期待結果**:
  - 自動的にHTTPSにリダイレクトされる
  - 証明書エラーが発生しない

### 8.2 XSS対策確認

#### TC-024: QRコードでのXSS確認
- **前提条件**: 悪意のあるデータを含むリスト
- **手順**:
  1. `<script>alert('XSS')</script>` を店名に入力
  2. 共有URLを生成
  3. QRコードを生成
- **期待結果**:
  - スクリプトが実行されない
  - QRコードが正常に生成される

## 9. 障害テスト

### 9.1 ネットワーク障害テスト

#### TC-025: CDN利用不可時の処理
- **前提条件**: QRコードライブラリのCDNが利用不可
- **手順**:
  1. ネットワークを遮断
  2. QRコード生成を試行
- **期待結果**:
  - 適切なエラーメッセージが表示される
  - アプリケーションがクラッシュしない

### 9.2 GitHub Pages 障害テスト

#### TC-026: GitHub Pages 一時停止時の処理
- **前提条件**: GitHub Pages が一時的に利用不可
- **手順**:
  1. GitHub Pages の状況を確認
  2. アクセス時の動作を確認
- **期待結果**:
  - 適切なエラーページが表示される
  - データが損失しない

## 10. ユーザビリティテスト

### 10.1 QRコード利用体験

#### TC-027: QRコード利用フロー
- **前提条件**: 初回利用ユーザー
- **手順**:
  1. リストを作成
  2. QRコードを生成
  3. 別デバイスでQRコードを読み取り
- **期待結果**:
  - 直感的に操作できる
  - 操作に迷わない
  - 満足度が高い

### 10.2 エラー処理の分かりやすさ

#### TC-028: エラーメッセージの理解度
- **前提条件**: 各種エラー発生時
- **手順**:
  1. 意図的にエラーを発生させる
  2. エラーメッセージを確認
- **期待結果**:
  - 理解しやすいメッセージ
  - 解決方法が分かる
  - 適切なタイミングで表示される

## 11. テスト結果記録

### 11.1 テスト実行記録
| テストID | 実施日 | 結果 | 実行者 | 備考 |
|---------|-------|------|-------|------|
| TC-001  |       | PASS/FAIL |       |      |
| TC-002  |       | PASS/FAIL |       |      |
| ...     |       | PASS/FAIL |       |      |

### 11.2 不具合記録
| 不具合ID | 発見日 | 症状 | 重要度 | 対応状況 |
|---------|-------|------|-------|---------|
| BUG-001 |       |      | High  | 対応中   |

## 12. テスト完了基準

### 12.1 合格基準
- 全機能テスト: 100%通過
- パフォーマンステスト: 目標値クリア
- セキュリティテスト: 1件も不具合なし
- ユーザビリティテスト: 90%以上の満足度

### 12.2 完了確認事項
- [ ] 全テストケース実行完了
- [ ] 重要不具合の解消
- [ ] 本番環境での動作確認
- [ ] ドキュメント更新完了